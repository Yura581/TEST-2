<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- ICO 格式 -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Findsly - The best kakobuy items find & qc check | Buying fromTaobao,Alibaba,weidian & more</title>
    <meta name="description" content="findsly is a versatile product finder and quality control (QC) service. It supports numerous sourcing platforms, including Taobao, Tmall, 1688, Weidian, and others like Kakobuy, Cnfans, Oopbuy, and ACBuy. Make your sourcing process more efficient and reliable.Better than spreadsheet.">
    <meta name="keywords" content="kakobuy,cnfans,acbuy,oopbuy,taobao,alibaba,weidian,qc check,best spreadsheet,findsly">
    
    <!-- SEO优化 -->
    <meta property="og:title" content="Findsly - The best kakobuy items find & qc check | Buying fromTaobao,Alibaba,weidian & more">
    <meta property="og:description" content="findsly is a versatile product finder and quality control (QC) service. It supports numerous sourcing platforms, including Taobao, Tmall, 1688, Weidian, and others like Kakobuy, Cnfans, Oopbuy, and ACBuy. Make your sourcing process more efficient and reliable.Better than spreadsheet.">
    <meta property="og:type" content="website">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333; /* 网页中所有文本的颜色，#333是一个深灰色 */
            background: #f8f9fa; /* 背景色的设置 */
            margin: 0;
            padding: 0;
        }

        /* 导航栏 */
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 1rem 0;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        /* Logo和按钮区域 */
        .logo-section {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .logo-container {
            width: 50px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .logo {
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
            display: none; /* 隐藏原来的文字logo样式，改用下面的图片样式 */
        }

        /* Logo容器 - 固定大小防止变形 */
        .logo-container {
            width: 50px; /* 固定logo宽度 */
            height: 40px; /* 固定logo高度 */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden; /* 隐藏溢出部分 */
        }

        .logo-container:hover {
            transform: scale(1.1); /* 鼠标悬停logo时放大10% */
}

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 25px;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        /* SIGN UP NOW 按钮 */
        .signup-btn {
            background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
            color: white !important;
            text-decoration: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3), 0 0 15px 5px rgba(255, 0, 0, 0.5); /* 添加红色外发光 */
            white-space: nowrap;
        }

        .signup-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
            background: linear-gradient(135deg, #7c3aed 0%, #9333ea 100%);
        }

        /* 主内容区 */
        .main-content {
            margin-top: 0; /* 移除banner顶部和横幅的边距 */
            min-height: calc(100vh - 80px);
        }

        /* 首页样式 */
        .hero-section {
            padding: 0;
            text-align: center;
        }

        .hero-banner {
            max-width: 100%;
            margin: 0;
            padding: 0;
            display: block; 
            line-height: 0; /* 消除图片下方间距 */
        }

        .hero-banner img {
            width: 100%; /* 强制让图片的宽度填满父容器 确保完整显示 */
            max-width: 100%;
            height: auto;
            border-radius: 0;
            box-shadow: none;
            margin-bottom: 0;
            object-fit: cover;
            display: block;
        }

        /* 第二个banner图片 - 完全新增 */
        .hero-banner-2 {
            width: 100%;
            margin: 0;
            padding: 0;
            display: none; /* 暂时隐藏banner2，需要时改为block即可重新显示 */
        }

        .hero-banner-2 img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 0;
            box-shadow: none;
            margin: 0;
            padding: 0;
            object-fit: cover;
        }

        /* FEATURED ITEMS作为h1标题 - 完全新增 */
        .featured-title {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 3rem;
            color: #333;
            font-weight: bold;
        }
        
        /* 推荐商品区域 */
        .featured-products {
            padding: 4rem 0;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #333;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 默认电脑端4列产品 */
            gap: 2rem; /* 电脑端产品之间的距离 */
            padding: 0 0.5rem;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 0;
            padding-bottom: 100%; /* 高度 = 宽度，实现1:1比例 */
            background: #f0f0f0;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-image img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* 保证完整显示，不裁剪 */
        }

        .product-info {
            padding: 1.2rem;  /* 修改产品图片和产品信息的边距 */
        }

        .product-category {
            color: #667eea;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .product-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
            line-height: 1.4;
        }

        .product-price {
            font-size: 1.4rem;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 0.5rem;
        }

        .product-buttons {
            display: flex;
            flex-direction: column; /* 把按钮从左右分布改为上下分布 */
            gap: 0.5rem;
        }

        .btn {
            flex: 1;
            padding: 0.8rem 1rem;
            border: none;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            text-align: center;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn:hover {
            transform: scale(1.05);
        }

        /* 筛选和搜索区域 */
        .filters-section {
            background: white;
            padding: 2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .filters-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .search-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 300px;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: scale(1.05);
        }

        /* 分类标签容器 */
        .category-tags-container {
            position: relative;
        }

        .category-tags {
            display: grid;
            gap: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }
        
        /* 桌面端：2行5列的分类选项 */
        @media (min-width: 769px) {
            .category-tags {
                grid-template-columns: repeat(5, 1fr);
                max-height: none;
                overflow: visible;
            }
            .category-tags.collapsed {
                grid-template-rows: repeat(2, 1fr);
                max-height: calc(2 * (50px + 1rem) - 1rem);
                overflow: hidden;
            }
        }
        
        /* 移动端：3行2列的分类选项 */
        @media (max-width: 768px) {
            .category-tags {
                grid-template-columns: repeat(2, 1fr);
                max-height: none;
                overflow: visible;
            }
            .category-tags.collapsed {
                grid-template-rows: repeat(3, 1fr);
                max-height: calc(3 * (50px + 1rem) - 1rem);
                overflow: hidden;
            }
        }
        
        /* 分类标签样式 */
        .category-tag {
            padding: 12px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            background: white;
            color: #666;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .category-tag:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        /* 选中分类状态 */
        .category-tag.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
        }
        
        .category-tag.selected:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        /* Load More 按钮 */
        .load-more-container {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }
        
        .load-more-btn {
            padding: 12px 30px;
            border: 2px solid #667eea;
            border-radius: 25px;
            background: white;
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .load-more-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.05);
        }

        .filter-options {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-select {
            padding: 0.5rem 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 20px;
            outline: none;
            background: white;
        }

        /* 社媒链接 */
        .social-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3rem 0;
            text-align: center;
            color: white;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .social-link {
            display: inline-block;
            padding: 1rem;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            transform: scale(1.1);
            background: rgba(255,255,255,0.3);
        }

        /* 页脚 */
        .footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem 0;
        }

        /* FAQ页面 */
        .faq-section {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            padding-top: 120px
        }

        .faq-item {
            background: white;
            margin-bottom: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .faq-question {
            padding: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transition: all 0.3s ease;
            font-size: 1rem
        }

        .faq-question:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .faq-answer {
            padding: 1.5rem;
            display: none;
            line-height: 1.8;
        }

        .faq-answer.active {
            display: block;
        }

        /* 加载状态 */
        .loading {
            text-align: center;
            padding: 3rem;
            color: #666;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .logo-section {
                justify-content: center;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
                justify-content: center;
            }

            .signup-btn {
                padding: 0.6rem 1.2rem;
            }

            .hero-content h1 {
                font-size: 2rem;
            }

            .featured-title {
                font-size: 1.5rem; /* 手机端缩小推荐商品标题featured items */
                margin-bottom: 1.5rem; /* 手机端推荐商品标题的下边距 */
                margin-top: 0.5rem; /* 手机端推荐商品标题的上边距 */
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr); /* 默认手机端2列 */
                gap: 1rem; /* 手机端中左右两列产品的中间间隔 */
                padding: 0 1rem;
            }

            /* 修改2: 减少手机端分类、标题、价格、按钮之间的空隙 */
            .product-info {
                padding: 0.8rem; /* 从1.2rem减少到0.8rem */
            }

            .product-category {
                margin-bottom: 0.15rem; /* 从0.25rem减少到0.15rem */
            }

            .product-title {
                margin-bottom: 0.3rem; /* 从0.5rem减少到0.3rem */
            }

            .product-price {
                margin-bottom: 0.3rem; /* 从0.5rem减少到0.3rem */
            }

            .product-buttons {
                gap: 0.3rem; /* 从0.5rem减少到0.3rem */
            }

            /* 修改3: 减小手机端按钮文字大小，确保文字在一行内 */
            .btn {
                padding: 0.6rem 0.8rem; /* 减少按钮的内边距 */
                font-size: 0.85rem; /* 减小字体大小，从默认减小到0.85rem */
                white-space: nowrap; /* 确保文字不换行 */
                overflow: hidden; /* 隐藏溢出文字 */
                text-overflow: ellipsis; /* 文字过长时显示省略号 */
            }

            .search-bar {
                flex-direction: column;
            }

            .search-input {
                min-width: 100%;
            }

            .filter-options {
                justify-content: center;
            }

            .social-links {
                gap: 1rem;
            }
        }

        /* 隐藏页面 */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* 分页 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 3rem 0;
        }

        .pagination button {
            padding: 0.5rem 1rem;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pagination button:hover,
        .pagination button.active {
            background: #667eea;
            color: white;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <!-- Logo和按钮组合 -->
            <div class="logo-section">
                <div class="logo-container" onclick="goToHome()">
                    <img src="images/logo.png" alt="网站Logo" class="logo-img"> <!-- 替换文字logo为图片logo，添加点击跳转首页功能 -->
                </div>
                <a href="https://ikako.vip/r/dbfmh" class="signup-btn" target="_blank">SIGN UP NOW</a>
            </div>

            <!-- 右侧导航菜单 -->
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-page="home">HOME</a></li>
                <li><a href="#" class="nav-link" data-page="products">ALL ITEMS</a></li>
                <li><a href="#" class="nav-link" data-page="faq">FAQ</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-content">
        <!-- 首页 -->
        <div id="home" class="page active">
            <!-- Hero区域 -->
            <section class="hero-section">
                <div class="hero-banner">
                    <!-- 替换为你的banner图片URL -->
                    <img src="images/banner.jpg" alt="网站横幅">
                    <div class="hero-banner-2">
                        <img src="images/banner2.jpg" alt="网站横幅2">
                    </div>
                </div>
            </section>

            <!-- 推荐商品 -->
            <section class="featured-products">
                <h1 class="featured-title">FEATURED ITEMS</h1>
                <div class="products-grid" id="featured-grid">
                    <div class="loading">Loading...</div>
                </div>
            </section>

            <!-- 社媒区域 #替换为为对应链接 使用 Font Awesome 图标库-->
            <section class="social-section">
                <h2>FOLLOW US</h2>
                <p>Get the latest product updates and exclusive offers</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-tiktok"></i> Tiktok</a>
                    <a href="#" class="social-link"><i class="fab fa-discord"></i> Discord</a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i> Instagram</a>
                    <a href="#" class="social-link"><i class="fab fa-youtube"></i> YouTube</a>
                </div>
            </section>
        </div>

        <!-- 所有商品页面 -->
        <div id="products" class="page">
            <!-- 筛选区域 -->
            <section class="filters-section">
                <div class="filters-container">
                    <div class="search-bar">
                        <input type="text" class="search-input" id="search-input" placeholder="Search product name or keywords...">
                        <button class="search-btn" onclick="searchProducts()">Search</button>
                    </div>
                    
                    <div class="category-tags-container">
                        <div class="category-tags collapsed" id="category-tags">
                            <!-- 分类标签会动态生成 -->
                        </div>
                        <div class="load-more-container">
                            <button class="load-more-btn" id="load-more-btn" onclick="toggleCategories()">Load More</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 商品展示区域 -->
            <section class="featured-products">
                <div class="products-grid" id="products-grid">
                    <div class="loading">Loading...</div>
                </div>
                
                <!-- 分页 -->
                <div class="pagination" id="pagination">
                    <button id="prev-btn" onclick="changePage(-1)">Previous</button>
                    <span id="page-info"> Page 1/ Total 1 Pages</span>
                    <button id="next-btn" onclick="changePage(1)">Next</button>
                </div>
            </section>
        </div>

        <!-- FAQ页面 -->
        <div id="faq" class="page">
            <section class="faq-section">
                <h1 class="section-title">FAQ</h1>
                
                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        How to buy？
                    </div>
                    <div class="faq-answer">
                        Find the item you want to buy on the page - click "Buy Now" - go to the shipping website to place your order - they will help you purchase the product, check quality, pack and ship - you only need to pay the international shipping fee and wait for your items to arrive.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        How do I search for a specific product?
                    </div>
                    <div class="faq-answer">
                        At the top of all items page, there's a search box where you can enter the products name, keyword, or brand. You can also use category and price filters to narrow your search.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        How often is product information updated?
                    </div>
                    <div class="faq-answer">
                        Our product information is updated from time to time. We collect high-quality, affordable, and interesting products from all over the web and synchronize them to our website. Bookmark our website for easy access whenever you need it.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        Is the website mobile-friendly?
                    </div>
                    <div class="faq-answer">
                        Yes, our website is fully mobile-friendly, including phones and tablets. The website automatically adapts to your device's screen to provide the best possible browsing experience.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question" onclick="toggleFAQ(this)">
                        Key Features and Disclaimers
                    </div>
                    <div class="faq-answer">
                        Our website only provides information services and has no connection with third-party shipping websites. We can earn a small portion of the international shipping fees you pay, but we have no profit from the product sales process.
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <p>&copy; 2025 This website does not sell any physical products, it is for educational purposes only, and the website owner reserves all rights.</p>
    </footer>

    <script>
        // 全局变量
        let allProducts = [];
        let filteredProducts = [];
        let currentPage = 1;
        const productsPerPage = 32; // 每页显示12个商品
        let selectedCategories = []; // 新增JavaScript函数
        let isExpanded = false;

        // 初始化分类标签
        function populateCategoryButtons() {
            const categories = [...new Set(allProducts.map(product => product.category))];
            const container = document.getElementById('category-tags');
            
            if (!container) return;
            
            container.innerHTML = '';
            
            categories.forEach((category, index) => {
                const tag = document.createElement('div');
                tag.className = 'category-tag';
                tag.textContent = category;
                tag.dataset.category = category;
                tag.onclick = () => toggleCategory(category, tag);
                container.appendChild(tag);
            });
            
            // 所有产品页面默认选中 "All" 如果存在
            const allTag = container.querySelector('[data-category="All"]');
            if (allTag) {
                toggleCategory('All', allTag);
            }
            updateDisplay();
        }
        
        // 切换分类选择（立即生效）
        function toggleCategory(category, tagElement) {
            if (category === 'All') {
                selectedCategories = ['All'];
                document.querySelectorAll('.category-tag').forEach(tag => {
                    tag.classList.remove('selected');
                });
                tagElement.classList.add('selected');
            } else {
                if (selectedCategories.includes('All')) {
                    selectedCategories = [];
                    const allTag = document.querySelector('[data-category="All"]');
                    if (allTag) allTag.classList.remove('selected');
                }
                
                if (selectedCategories.includes(category)) {
                    selectedCategories = selectedCategories.filter(cat => cat !== category);
                    tagElement.classList.remove('selected');
                    
                    if (selectedCategories.length === 0) {
                        selectedCategories = ['All'];
                        const allTag = document.querySelector('[data-category="All"]');
                        if (allTag) allTag.classList.add('selected');
                    }
                } else {
                    selectedCategories.push(category);
                    tagElement.classList.add('selected');
                }
            }
            
            // 立即筛选
            applyFilters();
        }
        
        // 展开/收起分类
        function toggleCategories() {
            const container = document.getElementById('category-tags');
            const button = document.getElementById('load-more-btn');
            
            isExpanded = !isExpanded;
            
            if (isExpanded) {
                container.classList.remove('collapsed');
                button.textContent = 'Show Less';
            } else {
                container.classList.add('collapsed');
                button.textContent = 'Load More';
            }
        }
        
        // 更新显示状态
        function updateDisplay() {
            const container = document.getElementById('category-tags');
            const button = document.getElementById('load-more-btn');
            
            const isMobile = window.innerWidth <= 768;
            const defaultCount = isMobile ? 6 : 10;
            const tags = container.children;
            const shouldShowLoadMore = tags.length > defaultCount;
            
            if (shouldShowLoadMore) {
                button.style.display = 'block';
                if (!isExpanded) {
                    container.classList.add('collapsed');
                }
            } else {
                button.style.display = 'none';
                container.classList.remove('collapsed');
            }
        }

        // Google Sheets配置 - 请替换为你的实际配置
        const SHEET_CONFIG = {
            // 替换为你的Google Sheets共享链接中的ID
            spreadsheetId: '1_vHznL3biFR1-0awyb1LDZPyXeOfS6LHSqPuTDcyKqY',
            // 替换为你的工作表名称
            sheetName: 'Products',
            // Google Sheets API密钥（可选，用于更好的访问控制）
            apiKey: 'YOUR_API_KEY'
        };
        
        // 添加logo点击跳转首页的函数
        function goToHome() {
            showPage('home');
        }

        // 页面导航
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            document.getElementById(pageId).classList.add('active');
            
            // 更新导航状态
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }

        // 导航点击事件
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.getAttribute('data-page');
                showPage(pageId);
            });
        });

        // 从 Cloudflare Worker API 获取数据
        async function fetchProductsFromSheets() {
            const cacheKey = 'products_cache';
            const cacheTimeKey = 'products_cache_time'; 
            const cacheExpiry = 5 * 60 * 1000; // 5分钟
            
            const cachedData = localStorage.getItem(cacheKey);
            const cacheTime = localStorage.getItem(cacheTimeKey);
            
            if (cachedData) {
                console.log('使用缓存数据（可能过期），立即渲染页面');
                const parsed = JSON.parse(cachedData);
                
                const isExpired = !cacheTime || (Date.now() - parseInt(cacheTime) > cacheExpiry);
                if (isExpired) {
                    console.log('缓存过期，后台更新中...');
                    refreshProductsCache(cacheKey, cacheTimeKey).catch(err => {
                        console.warn('后台更新失败，但不影响当前显示:', err);
                    });
                }
                
                return parsed;
            }
            
            console.log('没有缓存，调用API...');
            return await refreshProductsCache(cacheKey, cacheTimeKey);
        }
        
        async function refreshProductsCache(cacheKey, cacheTimeKey) {
            try {
                const response = await fetch("https://test-2.contact-yuralin.workers.dev/api/products", {
                    method: "GET",
                    headers: {
                        "Accept": "application/json"
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`API request failed: ${response.status}`);
                }
                
                const products = await response.json();
                console.log("从API获取的数据:", products);
                
                const processedData = products.map((product, index) => ({
                    id: product.id || index + 1,
                    title: product.title || `Product ${index + 1}`,
                    price: parseFloat(product.price) || 0,
                    category: product.category || 'Uncategorized',
                    image: product.image || 'https://via.placeholder.com/300x250/667eea/ffffff?text=Items Image',
                    link1: product.link1 || '#',
                    link1Text: product.link1Text || 'Buy Now',
                    link2: product.link2 || '#',
                    link2Text: product.link2Text || 'View Details',
                    featured: product.featured
                }));
                
                localStorage.setItem(cacheKey, JSON.stringify(processedData));
                localStorage.setItem(cacheTimeKey, Date.now().toString());
                console.log('缓存已更新');
                
                return processedData;
            } catch (error) {
                console.error("获取商品数据失败:", error);
                return generateSampleProducts();
            }
        }

        // 生成示例数据（用于演示）
        function generateSampleProducts() {
            const categories = ['电子产品', '服装配饰', '家居用品', '运动户外', '美妆护肤'];
            const products = [];
            
            for (let i = 1; i <= 50; i++) {
                const category = categories[Math.floor(Math.random() * categories.length)];
                const price = Math.floor(Math.random() * 1000) + 50;
                
                products.push({
                    id: i,
                    title: `精选商品 ${i} - ${category}`,
                    price: price,
                    category: category,
                    image: `https://via.placeholder.com/300x250/667eea/ffffff?text=商品${i}`,
                    link1: `#product-${i}-detail`,
                    link1Text: '查看详情',
                    link2: `#product-${i}-buy`,
                    link2Text: '立即购买',
                    featured: Math.random() < 0.3 // 30%概率成为推荐商品
                });
            }
            
            return products;
        }

        // 渲染商品卡片
        function renderProductCard(product) {
            return `
                <div class="product-card">
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.title}" loading="lazy">
                    </div>
                    <div class="product-info">
                        <div class="product-category">${product.category}</div>
                        <div class="product-title">${product.title}</div>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        <div class="product-buttons">
                            <a href="${product.link1}" class="btn btn-primary" target="_blank">${product.link1Text}</a>
                            <a href="${product.link2}" class="btn btn-secondary" target="_blank">${product.link2Text}</a>
                        </div>
                    </div>
                </div>
            `;
        }

        // 渲染推荐商品
        function renderFeaturedProducts() {
                // 不限制数量，显示所有推荐商品
            const featuredProducts = allProducts.filter(product => product.featured);
            const grid = document.getElementById('featured-grid');
            
            if (featuredProducts.length === 0) {
                // 如果没有推荐商品，显示前6个
                const fallbackProducts = allProducts.slice(0, 6);
                grid.innerHTML = fallbackProducts.map(renderProductCard).join('');
            } else {
                grid.innerHTML = featuredProducts.map(renderProductCard).join('');
            }
        }

        // 渲染所有商品
        function renderAllProducts() {
            const startIndex = (currentPage - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const pageProducts = filteredProducts.slice(startIndex, endIndex);
            
            const grid = document.getElementById('products-grid');
            if (pageProducts.length === 0) {
                grid.innerHTML = '<div class="loading">No matching items found</div>';
                return;
            }
            
            grid.innerHTML = pageProducts.map(renderProductCard).join('');
            
            // 更新分页信息
            updatePagination();
        }

        // 更新分页
        function updatePagination() {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            const pageInfo = document.getElementById('page-info');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            pageInfo.textContent = `Page ${currentPage}  / Total ${totalPages} Pages`;
            prevBtn.disabled = currentPage <= 1;
            nextBtn.disabled = currentPage >= totalPages;
        }

        // 翻页
        function changePage(direction) {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            const newPage = currentPage + direction;
            
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderAllProducts();
                window.scrollTo(0, 0);
            }
        }

        // 搜索商品
        function searchProducts() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase().trim();
            
            if (searchTerm === '') {
                filteredProducts = [...allProducts];
            } else {
                filteredProducts = allProducts.filter(product => 
                    product.title.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                );
            }
            
            currentPage = 1;
            renderAllProducts();
        }

        // 应用产品分类筛选
        function applyFilters() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase().trim();
            
            filteredProducts = allProducts.filter(product => {
                const matchesSearch = searchTerm === '' ||
                    product.title.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm);
                
                const matchesCategory = selectedCategories.includes('All') || 
                    selectedCategories.includes(product.category);
                
                return matchesSearch && matchesCategory;
            });
            
            currentPage = 1;
            renderAllProducts();
        }

        // 清除筛选
        function clearFilters() {
            document.getElementById('search-input').value = '';
            
            // 重置为选中All
            selectedCategories = ['All'];
            document.querySelectorAll('.category-tag').forEach(tag => {
                tag.classList.remove('selected');
            });
            const allTag = document.querySelector('[data-category="All"]');
            if (allTag) allTag.classList.add('selected');
            
            filteredProducts = [...allProducts];
            currentPage = 1;
            renderAllProducts();
        }

        // FAQ切换
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            answer.classList.toggle('active');
        }

        // 搜索框回车事件
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('search-input');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        searchProducts();
                    }
                });
            }
        });

        // 初始化网站
        async function initWebsite() {
            try {
                // 显示加载状态
                console.log('Loading items data...');
                
                // 获取产品数据
                allProducts = await fetchProductsFromSheets();
                filteredProducts = [...allProducts];
                
                console.log(`Successfully loaded ${allProducts.length} items`);
                
                // 分类筛选器
                populateCategoryButtons();
                
                // 渲染推荐商品
                renderFeaturedProducts();
                
                // 渲染所有商品（如果当前在商品页面）
                if (document.getElementById('products').classList.contains('active')) {
                    renderAllProducts();
                }
                
            } catch (error) {
                console.error('初始化失败:', error);
                
                // 显示错误信息
                const featuredGrid = document.getElementById('featured-grid');
                if (featuredGrid) {
                    featuredGrid.innerHTML = '<div class="loading">Loading failed, please refresh the page and try again</div>';
                }
                
                const productsGrid = document.getElementById('products-grid');
                if (productsGrid) {
                    productsGrid.innerHTML = '<div class="loading">Loading failed, please refresh the page and try again</div>';
                }
            }
        }

        // 页面导航增强版本
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            document.getElementById(pageId).classList.add('active');
            
            // 更新导航状态
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
            
            // 如果切换到商品页面且还没有渲染商品，则渲染
            if (pageId === 'products' && allProducts.length > 0) {
                renderAllProducts();
            }
            
            // 滚动到顶部
            window.scrollTo(0, 0);
        }

        // 动态调整导航栏高度
        function adjustLayoutForNavbar() {
            const navbar = document.querySelector('.navbar');
            const heroSection = document.querySelector('.hero-section');
            const filtersSection = document.querySelector('.filters-section');

            if (navbar) {
                const navbarHeight = navbar.offsetHeight;

                if (heroSection) {
                    heroSection.style.marginTop = navbarHeight + 'px';
                }
                if (filtersSection) {
                    filtersSection.style.marginTop = navbarHeight + 'px';
                }
            }
        }
        
        // 页面加载时执行
        window.addEventListener('load', adjustLayoutForNavbar);

        // 窗口大小变化时重新计算
        window.addEventListener('resize', adjustLayoutForNavbar);
        
        // 现有的初始化代码保持不变
        window.addEventListener('load', initWebsite);

        // 页面加载完成后初始化
        window.addEventListener('load', initWebsite);

        // 确保DOM加载完成后绑定事件
        document.addEventListener('DOMContentLoaded', function() {
            // 重新绑定导航事件（防止初始化顺序问题）
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('data-page');
                    showPage(pageId);
                });
            });
        });
    </script>
